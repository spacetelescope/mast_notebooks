

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Download MAST TESS Light Curves Within an FFI Footprint Using TAP &#8212; MAST Notebook Repository</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/TESS/beginner_tess_tap_search/beginner_tess_tap_search';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Search The TESS Input Catalog Centered On HD 209458." href="../beginner_tic_search_hd209458/beginner_tic_search_hd209458.html" />
    <link rel="prev" title="Exoplanet Data and TESS Light Curves Using Python Requests" href="../beginner_tess_exomast/beginner_tess_exomast.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/mastlogo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/mastlogo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Welcome to the MAST Notebook Repository!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Astrocut</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../astrocut/making_tess_cubes_and_cutouts/making_tess_cubes_and_cutouts.html">Generating Cubes and Cutouts from TESS FFIs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Astroquery</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../astroquery/intro.html">Intro</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../astroquery/nb.html">Notebooks</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../astroquery/beginner_search/beginner_search.html">Beginner: Searching MAST using astroquery.mast</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../astroquery/beginner_zcut/beginner_zcut.html">Beginner: Zcut and Astroquery Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../astroquery/large_downloads/large_downloads.html">Large Downloads in <code class="docutils literal notranslate"><span class="pre">astroquery.mast</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../astroquery/historic_quasar_observations/historic_quasar_observations.html">Historical Quasar Observations</a></li>





</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">HSC</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../HSC/HCV_API/HCV_API_demo.html">Hubble Catalog of Variables Notebook (API version)</a></li>



<li class="toctree-l1"><a class="reference internal" href="../../HSC/HSCV3_API/hscv3_api.html">Hubble Source Catalog API Notebook</a></li>



<li class="toctree-l1"><a class="reference internal" href="../../HSC/HSCV3_SMC_API/hscv3_smc_api.html">Hubble Source Catalog API Notebook: SMC Color-Magnitude Diagram</a></li>



<li class="toctree-l1"><a class="reference internal" href="../../HSC/HSC_TAP/HSC_TAP.html">MAST Table Access Protocol Hubble Source Catalog Demo</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../HSC/SWEEPS_HSCV3P1/sweeps_hscv3p1.html">Hubble Source Catalog SWEEPS Proper Motion Notebook</a></li>






















</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">IUE</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../IUE/exploring_UV_extinction_curves/exploring_UV_extinction_curves.html">Exploring UV Extinction Curves</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">JWST</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../JWST/download_by_program_id/download_by_program_id.html">Accessing JWST Proposal Data in astroquery.mast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../JWST/Engineering_Database_Retreival/EDB_Retrieval.html">JWST Engineering Data Retrieval</a></li>




<li class="toctree-l1"><a class="reference internal" href="../../JWST/SI_keyword_exoplanet_search/SI_keyword_exoplanet_search.html">JWST SI Keyword Search for Exoplanet Spectra</a></li>




</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Kepler</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Kepler/beginner.html">Beginner Notebooks</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/plotting_lightcurves/plotting_lightcurves.html">Using Kepler Data to Plot a Light Curve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/plotting_images_from_tpf/plotting_images_from_tpf.html">Plotting Images from Kepler Target Pixel Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/plotting_dvts/plotting_dvts.html">Read and Plot A Kepler Data Validation Timeseries File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/plotting_catalog_over_FFI/plotting_catalog_over_FFI.html">Plotting a Catalog over a Kepler Full Frame Image File</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Kepler/lightkurve.html">Lightkurve</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/lightkurve_searching_for_data/lightkurve_searching_for_data.html">Searching for <em>Kepler</em>/<em>K2</em> and <em>TESS</em> Data Products Using Lightkurve</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/lightkurve_custom_aperture_photometry/lightkurve_custom_aperture_photometry.html">Creating Your Own Light Curves using Custom Aperture Photometry</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/lightkurve_combining_multiple_quarters/lightkurve_combining_multiple_quarters.html">Combining Multiple Quarters of <em>Kepler</em> Data with Lightkurve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/lightkurve_interactively_inspecting_TPFs_and_LCs/lightkurve_interactively_inspecting_TPFs_and_LCs.html">Interactively Inspecting Target Pixel Files and Light Curves</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Kepler/inst_noise.html">Instrumental Noise</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/instrumental_noise_1_data_gaps_and_quality_flags/instrumental_noise_1_data_gaps_and_quality_flags.html">Data Gaps and Quality Flags</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/instrumental_noise_2_spurious_signals_and_time_sampling_effects/instrumental_noise_2_spurious_signals_and_time_sampling_effects.html">Spurious Signals and Time Sampling Effects</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/instrumental_noise_3_seasonal_and_detector_effects/instrumental_noise_3_seasonal_and_detector_effects.html">Seasonal and Detector Effects</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/instrumental_noise_4_electronic_noise/instrumental_noise_4_electronic_noise.html">Electronic Noise</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Kepler/signals.html">Identifying Periodic Signals</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/identifying_transiting_planet_signals/identifying_transiting_planet_signals.html">Identifying Transiting Planet Signals in a <em>Kepler</em> Light Curve</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/measuring_a_rotation_period/measuring_a_rotation_period.html">Measuring and Removing a Rotation Period Signal from a <em>Kepler</em> Light Curve</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/visualizing_periodic_signals_using_a_river_plot/visualizing_periodic_signals_using_a_river_plot.html">Visualizing Periodic Signals Using a River Plot</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/verifying_the_location_of_a_signal/verifying_the_location_of_a_signal.html">Verifying the Location of a Signal in <em>Kepler</em> Pixel Data</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Kepler/periodograms.html">Periodograms &amp; Asteroseismology</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Kepler/creating_periodograms/creating_periodograms.html">Creating Periodograms</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/how_to_understand_and_manipulate_the_periodogram_of_an_oscillating_star/how_to_understand_and_manipulate_the_periodogram_of_an_oscillating_star.html">How to Understand and Manipulate the Periodogram of an Oscillating Star</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../Kepler/how_to_estimate_a_stars_mass_and_radius_using_asteroseismology/how_to_estimate_a_stars_mass_and_radius_using_asteroseismology.html">How to Estimate a Star’s Mass and Radius Using Asteroseismology</a></li>

</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">K2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../K2/TPF/TPF.html">Beginner: Read and Display A K2 Target Pixel File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../K2/beginner_how_to_use_ffi/beginner_how_to_use_ffi.html">Beginner: Read and Display a K2 Full Frame Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../K2/removing_instrumental_noise_using_pld/removing_instrumental_noise_using_pld.html">Removing Instrumental Noise from <em>K2</em> and <em>TESS</em> Light Curves Using Pixel Level Decorrelation (PLD)</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">MCCM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../MCCM/FIMS-SPEAR/hyperspectral_healpix_maps/hyperspectral_healpix_maps.html">Working with FIMS-SPEAR Hyperspectral HEALPix Maps</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">PanSTARRS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../PanSTARRS/PS1_DR2_TAP/PS1_DR2_TAP.html">MAST Table Access Protocol PanSTARRS 1 DR2 Demo</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">TESS</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../beginner.html">Beginner Notebooks</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beginner_astroquery_dv/beginner_astroquery_dv.html">Retrieve TESS Data Validation Products with Astroquery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner_how_to_use_dvt/beginner_how_to_use_dvt.html">Read and Plot A TESS Data Validation Timeseries File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner_how_to_use_ffi/beginner_how_to_use_ffi.html">Read and Display a TESS Full Frame Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner_how_to_use_lc/beginner_how_to_use_lc.html">Read and Plot A TESS Light Curve File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner_how_to_use_tp/beginner_how_to_use_tp.html">Read and Display A TESS Target Pixel File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner_tess_exomast/beginner_tess_exomast.html">Exoplanet Data and TESS Light Curves Using Python Requests</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Download MAST TESS Light Curves Within an FFI Footprint Using TAP</a></li>

<li class="toctree-l2"><a class="reference internal" href="../beginner_tic_search_hd209458/beginner_tic_search_hd209458.html">Search The TESS Input Catalog Centered On HD 209458.</a></li>

<li class="toctree-l2"><a class="reference internal" href="../beginner_tour_lc_tp/beginner_tour_lc_tp.html">A Tour of the Contents of the TESS 2-minute Cadence Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner_tesscut_astroquery/beginner_tesscut_astroquery.html">Cutout of the TESS FFIs using Astrocut and Astroquery</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../lc.html">Light Curves</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interm_gi_query/interm_gi_query.html">Intermediate:  Search and Download GI Program Light Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interm_tasoc_lc/interm_tasoc_lc.html">Intermediate: Finding Flares and Variable Stars in TASOC Light Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asteroid_rotation/asteroid_rotation.html">Finding the Rotation Curve of an Asteroid or Comet with TESScut and Lightkurve</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../FFIs.html">TESS FFIs</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interm_tesscut_dss_overlay/interm_tesscut_dss_overlay.html">Intermediate: Overlay a Cutout of the TESS FFIs with DSS imaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interm_tesscut_requests/interm_tesscut_requests.html">Intermediate: Create TESS FFI Cutout using Python Requests</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../noise.html">Instrumental Noise</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interm_tess_prf_retrieve/interm_tess_prf_retrieve.html">Intermediate: Retrieve TESS Pixel Response Function Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../removing_scattered_light_using_regression/removing_scattered_light_using_regression.html">Removing Scattered Light from <em>TESS</em> Data Using the Lightkurve <code class="docutils literal notranslate"><span class="pre">RegressionCorrector</span></code></a></li>

</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/spacetelescope/mast_notebooks/main?urlpath=tree/notebooks/notebooks/TESS/beginner_tess_tap_search/beginner_tess_tap_search.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/spacetelescope/mast_notebooks/blob/main/notebooks/notebooks/TESS/beginner_tess_tap_search/beginner_tess_tap_search.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/spacetelescope/mast_notebooks" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/spacetelescope/mast_notebooks/issues/new?title=Issue%20on%20page%20%2Fnotebooks/TESS/beginner_tess_tap_search/beginner_tess_tap_search.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/notebooks/TESS/beginner_tess_tap_search/beginner_tess_tap_search.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Download MAST TESS Light Curves Within an FFI Footprint Using TAP</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Download MAST TESS Light Curves Within an FFI Footprint Using TAP</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents">Table of Contents</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tap-service-introduction">TAP Service Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports">Imports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#service-specific-configuration">Service Specific Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-to-the-tap-service">Connecting to the TAP Service</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#list-available-tables">List available tables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-case-getting-images-from-a-sector-camera-and-chip">Use Case: Getting images from a sector, camera, and chip</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-getting-the-footprint">Step 1: Getting the footprint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-getting-an-inventory-of-tess-lightcurves-within-the-footprint">Step 2: Getting an inventory of TESS lightcurves within the footprint</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-resources">Additional Resources</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-access-protocol">Table Access Protocol</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#astronomical-query-data-language-2-0">Astronomical Query Data Language (2.0)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-archive-observation-model-2">Common Archive Observation Model (2)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pyvo">PyVO</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about-this-notebook">About this Notebook</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="download-mast-tess-light-curves-within-an-ffi-footprint-using-tap">
<h1>Download MAST TESS Light Curves Within an FFI Footprint Using TAP<a class="headerlink" href="#download-mast-tess-light-curves-within-an-ffi-footprint-using-tap" title="Permalink to this heading">#</a></h1>
<p><br> This notebook is a demo for accessing Transiting Exoplanet Survey Satellite (TESS) data in the Common Archive Observation Model (CAOM) catalog at MAST, using a Virtual Observatory standard Table Access Protocol (TAP) service.</p>
<hr class="docutils" />
<section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><span class="xref myst">TAP Service Introduction</span></p></li>
<li><p><span class="xref myst">Imports</span></p></li>
<li><p><span class="xref myst">Service Specific Configuration</span></p></li>
<li><p><span class="xref myst">Connecting to the TAP Service</span></p></li>
<li><p><span class="xref myst">Use Case: Getting light curves from a sector, camera, and chip</span></p>
<ul class="simple">
<li><p><span class="xref myst">Step 1: Getting the footprint</span></p></li>
<li><p><span class="xref myst">Step 2: Getting an inventory of TESS lightcurves within the footprint</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Additional Resources</span></p></li>
<li><p><span class="xref myst">About This Notebook</span></p></li>
</ol>
</section>
<hr class="docutils" />
<section id="tap-service-introduction">
<h2>TAP Service Introduction<a class="headerlink" href="#tap-service-introduction" title="Permalink to this heading">#</a></h2>
<p>Table Access Protocol (TAP) services allow more direct and flexible access to astronomical data than the simpler types of IVOA standard data services. Queries are built with the SQL-like Astronomical Data Query Language (ADQL), and can include geographic / spatial queries as well as filtering on other characteristics of the data. This also allows the user fine-grained control over the returned columns, unlike the fixed set of coumns retunred from cone, image, and spectral services.</p>
<p>For this example, we’ll be using the astropy affiliated PyVO client, which is interoperable with other valid TAP services, including those at MAST. PyVO documentation is available at ReadTheDocs: https://pyvo.readthedocs.io</p>
<p>We’ll be using PyVO to call the CAOM Catalog TAP service at MAST and filter the results for TESS-related information. The schema for this catalog is an IVOA standard, and is also described within the service itself.</p>
</section>
<hr class="docutils" />
<section id="imports">
<h2>Imports<a class="headerlink" href="#imports" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the pyvo library as our client to the data service.</span>
<span class="kn">import</span> <span class="nn">pyvo</span> <span class="k">as</span> <span class="nn">vo</span>

<span class="c1"># For handling ordinary astropy Tables in responses</span>
<span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>

<span class="c1"># For displaying and manipulating some types of results</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">astropy</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># To allow display tweaks for wider response tables</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="c1"># suppress unimportant unit warnings from many TAP services</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="s2">&quot;astropy.io.votable.*&quot;</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="s2">&quot;pyvo.utils.xml.elements&quot;</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="s2">&quot;pyvo.io.vosi.vodataservice&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="service-specific-configuration">
<h2>Service Specific Configuration<a class="headerlink" href="#service-specific-configuration" title="Permalink to this heading">#</a></h2>
<p>Every TAP service has a “Base URL” plus associated endpoints for synchronous and asynchronous queries, as well as status and capability information, and sometimes service-provided sample queries. The endpoints are predefined in the TAP standard, so clients can infer them using the base. We therefore only have to provide astroquery that base.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TAP_URL</span> <span class="o">=</span> <span class="s2">&quot;https://vao.stsci.edu/caomtap/tapservice.aspx&quot;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="connecting-to-the-tap-service">
<h2>Connecting to the TAP Service<a class="headerlink" href="#connecting-to-the-tap-service" title="Permalink to this heading">#</a></h2>
<p>The PyVO library is able to connect to any TAP service, given the “base” URL as noted in metadata registry resources describing the service. The CAOM TAP service at MAST has access to TESS FFI and time series, including file URLs for download.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TAP_service</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="n">dal</span><span class="o">.</span><span class="n">TAPService</span><span class="p">(</span><span class="n">TAP_URL</span><span class="p">)</span>
<span class="n">TAP_service</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Capability ivo://ivoa.net/std/TAP

Interface None
    http://vao.stsci.edu/caomtap/tapservice.aspx

Datamodel ObsCore#core-1.1
    ivo://ivoa.net/std/ObsCore#core-1.1

Language ADQL
    ivo://ivoa.net/std/TAPRegExt#features-adqlgeo
        BOX

        POINT

        CIRCLE

        POLYGON

        CONTAINS


Output format application/x-votable+xml
    Also available as votable

Output format text/csv;header=present
    Also available as csv


Capability ivo://ivoa.net/std/DALI#examples-1.0

Interface vr:WebBrowser
    http://vao.stsci.edu/caomtap/tapservice.aspx/examples
</pre></div>
</div>
</div>
</div>
<section id="list-available-tables">
<h3>List available tables<a class="headerlink" href="#list-available-tables" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TAP_tables</span> <span class="o">=</span> <span class="n">TAP_service</span><span class="o">.</span><span class="n">tables</span>
<span class="k">for</span> <span class="n">tablename</span> <span class="ow">in</span> <span class="n">TAP_tables</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;tap_schema&quot;</span> <span class="ow">in</span> <span class="n">tablename</span><span class="p">:</span>  
        <span class="n">TAP_tables</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Columns=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">k</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">TAP_tables</span><span class="p">[</span><span class="n">tablename</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span> <span class="p">])))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ivoa.obscore
    The IVOA-defined obscore table, version 1.1, containing generic metadata for datasets within this datacenter&#39;s CAOM database.

Columns=[&#39;access_estsize&#39;, &#39;access_format&#39;, &#39;access_url&#39;, &#39;calib_level&#39;, &#39;dataproduct_type&#39;, &#39;em_max&#39;, &#39;em_min&#39;, &#39;em_res_power&#39;, &#39;em_xel&#39;, &#39;facility_name&#39;, &#39;instrument_name&#39;, &#39;o_ucd&#39;, &#39;obs_collection&#39;, &#39;obs_id&#39;, &#39;obs_publisher_did&#39;, &#39;pol_states&#39;, &#39;pol_xel&#39;, &#39;s_dec&#39;, &#39;s_fov&#39;, &#39;s_ra&#39;, &#39;s_region&#39;, &#39;s_resolution&#39;, &#39;s_xel1&#39;, &#39;s_xel2&#39;, &#39;t_exptime&#39;, &#39;t_max&#39;, &#39;t_min&#39;, &#39;t_resolution&#39;, &#39;t_xel&#39;, &#39;target_name&#39;]
----
dbo.CaomObservation
    An observation is the primary top-level class for empirical data.

Columns=[&#39;accMetaChecksum&#39;, &#39;algName&#39;, &#39;collection&#39;, &#39;envAmbientTemp&#39;, &#39;envElevation&#39;, &#39;envHumidity&#39;, &#39;envPhotometric&#39;, &#39;envSeeing&#39;, &#39;envTau&#39;, &#39;envWavelengthTau&#39;, &#39;id&#39;, &#39;insKeywords&#39;, &#39;insName&#39;, &#39;intent&#39;, &#39;lastModified&#39;, &#39;linked&#39;, &#39;maxLastModified&#39;, &#39;maxLevel&#39;, &#39;metaChecksum&#39;, &#39;metaDataRights&#39;, &#39;metaProducer&#39;, &#39;metaReadGroups&#39;, &#39;metaRelease&#39;, &#39;nObs&#39;, &#39;obsType&#39;, &#39;observationID&#39;, &#39;observationTID&#39;, &#39;prpID&#39;, &#39;prpKeywords&#39;, &#39;prpPI&#39;, &#39;prpProject&#39;, &#39;prpTitle&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;, &#39;reqFlag&#39;, &#39;sequenceNumber&#39;, &#39;tlsGeoLocationX&#39;, &#39;tlsGeoLocationY&#39;, &#39;tlsGeoLocationZ&#39;, &#39;tlsKeywords&#39;, &#39;tlsName&#39;, &#39;trgClassification&#39;, &#39;trgID&#39;, &#39;trgKeywords&#39;, &#39;trgMoving&#39;, &#39;trgName&#39;, &#39;trgPosCoordSys&#39;, &#39;trgPosDec&#39;, &#39;trgPosEquinox&#39;, &#39;trgPosRA&#39;, &#39;trgRedshift&#39;, &#39;trgStandard&#39;, &#39;trgType&#39;, &#39;type&#39;]
----
dbo.CaomPlane
    A plane is one (of several) data product(s) that are created as part of an observation. Each simple observation typically has one raw plane created by the observing process itself and may have one or more additional planes that are produced by subsequent data processing.

Columns=[&#39;accMetaChecksum&#39;, &#39;calibrationLevel&#39;, &#39;collection&#39;, &#39;creatorID&#39;, &#39;cstCtype&#39;, &#39;cstDimension&#39;, &#39;cstLower&#39;, &#39;cstUpper&#39;, &#39;dataProductType&#39;, &#39;dataReadGroups&#39;, &#39;dataRelease&#39;, &#39;dataRights&#39;, &#39;dqFlag&#39;, &#39;enrBandpassName&#39;, &#39;enrBoundsSTCS&#39;, &#39;enrDimension&#39;, &#39;enrEMBand&#39;, &#39;enrMax&#39;, &#39;enrMin&#39;, &#39;enrResolvingPower&#39;, &#39;enrResolvingPowerLower&#39;, &#39;enrResolvingPowerUpper&#39;, &#39;enrRestWavelength&#39;, &#39;enrSampleSize&#39;, &#39;enrTransition&#39;, &#39;id&#39;, &#39;lastModified&#39;, &#39;maxLastModified&#39;, &#39;metaChecksum&#39;, &#39;metaDataRights&#39;, &#39;metaProducer&#39;, &#39;metaReadGroups&#39;, &#39;metaRelease&#39;, &#39;midExpDate&#39;, &#39;mtrBackground&#39;, &#39;mtrBackgroundStdDev&#39;, &#39;mtrFluxDensityLimit&#39;, &#39;mtrMagLimit&#39;, &#39;mtrSampleSNR&#39;, &#39;mtrSourceNumberDensity&#39;, &#39;obsUCD&#39;, &#39;observationTID&#39;, &#39;observationUUID&#39;, &#39;planeTID&#39;, &#39;plrDimension&#39;, &#39;plrState&#39;, &#39;posBoundsSTCS&#39;, &#39;posDimension1&#39;, &#39;posDimension2&#39;, &#39;posResolution&#39;, &#39;posResolutionLower&#39;, &#39;posResolutionUpper&#39;, &#39;posSampleSize&#39;, &#39;posTimeDependant&#39;, &#39;previewURI&#39;, &#39;productID&#39;, &#39;productURI&#39;, &#39;prvInputs&#39;, &#39;prvKeywords&#39;, &#39;prvLastExecuted&#39;, &#39;prvName&#39;, &#39;prvProducer&#39;, &#39;prvProject&#39;, &#39;prvReference&#39;, &#39;prvRunID&#39;, &#39;prvVersion&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;, &#39;releaseDate&#39;, &#39;timBoundsSTCS&#39;, &#39;timDimension&#39;, &#39;timExposure&#39;, &#39;timMax&#39;, &#39;timMin&#39;, &#39;timResolution&#39;, &#39;timResolutionLower&#39;, &#39;timResolutionUpper&#39;, &#39;timSampleSize&#39;]
----
dbo.CaomArtifact
    An artifact is one physical product or resource (typically a file) that is part of a plane.

Columns=[&#39;accMetaChecksum&#39;, &#39;artifactTID&#39;, &#39;collection&#39;, &#39;contentChecksum&#39;, &#39;contentLength&#39;, &#39;contentReadGroups&#39;, &#39;contentRelease&#39;, &#39;contentRights&#39;, &#39;contentType&#39;, &#39;creationDate&#39;, &#39;dataURI&#39;, &#39;id&#39;, &#39;lastModified&#39;, &#39;maxLastModified&#39;, &#39;metaChecksum&#39;, &#39;metaProducer&#39;, &#39;planeTID&#39;, &#39;planeUUID&#39;, &#39;productFilename&#39;, &#39;productType&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;, &#39;releaseType&#39;]
----
dbo.CaomPart
    A part is format-specific name; this is typically something like a FITS extension or a file within a container

Columns=[&#39;accMetaChecksum&#39;, &#39;artifactTID&#39;, &#39;artifactUUID&#39;, &#39;collection&#39;, &#39;id&#39;, &#39;lastModified&#39;, &#39;maxLastModified&#39;, &#39;metaChecksum&#39;, &#39;metaProducer&#39;, &#39;name&#39;, &#39;partTID&#39;, &#39;productType&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;]
----
dbo.CaomChunk
    A chunk is a quantitatively defined subsection of a data array; the part contains the whole array

Columns=[&#39;accMetaChecksum&#39;, &#39;chunkTID&#39;, &#39;collection&#39;, &#39;cstwcsCRPIX&#39;, &#39;cstwcsCRVAL&#39;, &#39;cstwcsCTYPE&#39;, &#39;cstwcsCUNIT&#39;, &#39;cstwcsDELTA&#39;, &#39;cstwcsNAXIS&#39;, &#39;cstwcsRNDER&#39;, &#39;cstwcsRangeEndPix&#39;, &#39;cstwcsRangeEndVal&#39;, &#39;cstwcsRangeStartPix&#39;, &#39;cstwcsRangeStartVal&#39;, &#39;cstwcsSYSER&#39;, &#39;customAxis&#39;, &#39;energyAxis&#39;, &#39;enrwcsBandpassname&#39;, &#39;enrwcsCRPIX&#39;, &#39;enrwcsCRVAL&#39;, &#39;enrwcsCTYPE&#39;, &#39;enrwcsCUNIT&#39;, &#39;enrwcsDELTA&#39;, &#39;enrwcsNAXIS&#39;, &#39;enrwcsRNDER&#39;, &#39;enrwcsRangeEndPix&#39;, &#39;enrwcsRangeEndVal&#39;, &#39;enrwcsRangeStartPix&#39;, &#39;enrwcsRangeStartVal&#39;, &#39;enrwcsResolvingpower&#39;, &#39;enrwcsRestfrq&#39;, &#39;enrwcsRestwav&#39;, &#39;enrwcsSYSER&#39;, &#39;enrwcsSpecSys&#39;, &#39;enrwcsSsysobs&#39;, &#39;enrwcsSsyssrc&#39;, &#39;enrwcsTransition&#39;, &#39;enrwcsVelang&#39;, &#39;enrwcsVelosys&#39;, &#39;enrwcsZsource&#39;, &#39;id&#39;, &#39;lastModified&#39;, &#39;maxLastModified&#39;, &#39;metaChecksum&#39;, &#39;metaProducer&#39;, &#39;naxis&#39;, &#39;observableAxis&#39;, &#39;obxDepBin&#39;, &#39;obxDepCTYPE&#39;, &#39;obxDepCUNIT&#39;, &#39;obxIndBin&#39;, &#39;obxIndCTYPE&#39;, &#39;obxIndCUNIT&#39;, &#39;partTID&#39;, &#39;partUUID&#39;, &#39;plrwcsCRPIX&#39;, &#39;plrwcsCRVAL&#39;, &#39;plrwcsCTYPE&#39;, &#39;plrwcsCUNIT&#39;, &#39;plrwcsDELTA&#39;, &#39;plrwcsNAXIS&#39;, &#39;plrwcsRNDER&#39;, &#39;plrwcsRangeEndPix&#39;, &#39;plrwcsRangeEndVal&#39;, &#39;plrwcsRangeStartPix&#39;, &#39;plrwcsRangeStartVal&#39;, &#39;plrwcsSYSER&#39;, &#39;polarizationAxis&#39;, &#39;positionAxis1&#39;, &#39;positionAxis2&#39;, &#39;poswcsCD11&#39;, &#39;poswcsCD12&#39;, &#39;poswcsCD21&#39;, &#39;poswcsCD22&#39;, &#39;poswcsCRPIX1&#39;, &#39;poswcsCRPIX2&#39;, &#39;poswcsCRVAL1&#39;, &#39;poswcsCRVAL2&#39;, &#39;poswcsCTYPE1&#39;, &#39;poswcsCTYPE2&#39;, &#39;poswcsCUNIT1&#39;, &#39;poswcsCUNIT2&#39;, &#39;poswcsCoordSys&#39;, &#39;poswcsEquinox&#39;, &#39;poswcsNAXIS1&#39;, &#39;poswcsNAXIS2&#39;, &#39;poswcsRNDER1&#39;, &#39;poswcsRNDER2&#39;, &#39;poswcsRangeEndPix1&#39;, &#39;poswcsRangeEndPix2&#39;, &#39;poswcsRangeEndVal1&#39;, &#39;poswcsRangeEndVal2&#39;, &#39;poswcsRangeStartPix1&#39;, &#39;poswcsRangeStartPix2&#39;, &#39;poswcsRangeStartVal1&#39;, &#39;poswcsRangeStartVal2&#39;, &#39;poswcsResolution&#39;, &#39;poswcsSYSER1&#39;, &#39;poswcsSYSER2&#39;, &#39;productType&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;, &#39;timeAxis&#39;, &#39;timwcsCRPIX&#39;, &#39;timwcsCRVAL&#39;, &#39;timwcsCTYPE&#39;, &#39;timwcsCUNIT&#39;, &#39;timwcsDELTA&#39;, &#39;timwcsExposure&#39;, &#39;timwcsMJDref&#39;, &#39;timwcsNAXIS&#39;, &#39;timwcsRNDER&#39;, &#39;timwcsRangeEndPix&#39;, &#39;timwcsRangeEndVal&#39;, &#39;timwcsRangeStartPix&#39;, &#39;timwcsRangeStartVal&#39;, &#39;timwcsResolution&#39;, &#39;timwcsSYSER&#39;, &#39;timwcsTimeSys&#39;, &#39;timwcsTrefpos&#39;]
----
dbo.CaomMembers
    members of a composite observation.

Columns=[&#39;DerivedTID&#39;, &#39;SimpleTID&#39;, &#39;collection&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;]
----
dbo.MastLinks
    members of a linked observation.

Columns=[&#39;collection&#39;, &#39;linkCollection&#39;, &#39;linkTID&#39;, &#39;linkType&#39;, &#39;obsTID&#39;, &#39;recordCreated&#39;, &#39;recordModified&#39;]
----
dbo.MASTproductDescription
    descriptions and documentation for projects

Columns=[&#39;contentType&#39;, &#39;description&#39;, &#39;documentationURL&#39;, &#39;groupDescription&#39;, &#39;mission&#39;, &#39;productType&#39;, &#39;project&#39;, &#39;subGroupDescription&#39;, &#39;typeID&#39;]
----
dbo.ObsPointing
    A view for science observations. This returns equivalent data to a Portal search. Wavelength scale, dates, and target keywords have been adjusted from the main Caom table data.

Columns=[&#39;calib_level&#39;, &#39;dataProduct_Type&#39;, &#39;dataRights&#39;, &#39;dataURL&#39;, &#39;em_max&#39;, &#39;em_min&#39;, &#39;filters&#39;, &#39;instrument_name&#39;, &#39;intentType&#39;, &#39;jpegURL&#39;, &#39;mtFlag&#39;, &#39;objID&#39;, &#39;obsID&#39;, &#39;obs_collection&#39;, &#39;obs_id&#39;, &#39;obs_title&#39;, &#39;project&#39;, &#39;proposal_id&#39;, &#39;proposal_pi&#39;, &#39;proposal_type&#39;, &#39;provenance_name&#39;, &#39;s_dec&#39;, &#39;s_ra&#39;, &#39;s_region&#39;, &#39;sequence_number&#39;, &#39;srcDen&#39;, &#39;t_exptime&#39;, &#39;t_max&#39;, &#39;t_min&#39;, &#39;t_obs_release&#39;, &#39;target_classification&#39;, &#39;target_name&#39;, &#39;wavelength_region&#39;]
----
dbo.CalPointing
    A view for calibration observations. Wavelength scale, dates, and target keywords have been adjusted from the main Caom table data.

Columns=[&#39;calib_level&#39;, &#39;dataProduct_Type&#39;, &#39;dataRights&#39;, &#39;dataURL&#39;, &#39;em_max&#39;, &#39;em_min&#39;, &#39;filters&#39;, &#39;instrument_name&#39;, &#39;intentType&#39;, &#39;jpegURL&#39;, &#39;mtFlag&#39;, &#39;objID&#39;, &#39;obsID&#39;, &#39;obs_collection&#39;, &#39;obs_id&#39;, &#39;obs_title&#39;, &#39;project&#39;, &#39;proposal_id&#39;, &#39;proposal_pi&#39;, &#39;proposal_type&#39;, &#39;provenance_name&#39;, &#39;s_dec&#39;, &#39;s_ra&#39;, &#39;s_region&#39;, &#39;sequence_number&#39;, &#39;srcDen&#39;, &#39;t_exptime&#39;, &#39;t_max&#39;, &#39;t_min&#39;, &#39;t_obs_release&#39;, &#39;target_classification&#39;, &#39;target_name&#39;, &#39;wavelength_region&#39;]
----
dbo.AllPointing
    A view for ALL observations. Wavelength scale, dates, and target keywords have been adjusted from the main Caom table data.

Columns=[&#39;calib_level&#39;, &#39;dataProduct_Type&#39;, &#39;dataRights&#39;, &#39;dataURL&#39;, &#39;em_max&#39;, &#39;em_min&#39;, &#39;filters&#39;, &#39;instrument_name&#39;, &#39;intentType&#39;, &#39;jpegURL&#39;, &#39;mtFlag&#39;, &#39;objID&#39;, &#39;obsID&#39;, &#39;obs_collection&#39;, &#39;obs_id&#39;, &#39;obs_title&#39;, &#39;project&#39;, &#39;proposal_id&#39;, &#39;proposal_pi&#39;, &#39;proposal_type&#39;, &#39;provenance_name&#39;, &#39;s_dec&#39;, &#39;s_ra&#39;, &#39;s_region&#39;, &#39;sequence_number&#39;, &#39;srcDen&#39;, &#39;t_exptime&#39;, &#39;t_max&#39;, &#39;t_min&#39;, &#39;t_obs_release&#39;, &#39;target_classification&#39;, &#39;target_name&#39;, &#39;wavelength_region&#39;]
----
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="use-case-getting-images-from-a-sector-camera-and-chip">
<h2>Use Case: Getting images from a sector, camera, and chip<a class="headerlink" href="#use-case-getting-images-from-a-sector-camera-and-chip" title="Permalink to this heading">#</a></h2>
<section id="step-1-getting-the-footprint">
<h3>Step 1: Getting the footprint<a class="headerlink" href="#step-1-getting-the-footprint" title="Permalink to this heading">#</a></h3>
<p>For our purposes, any one footprint related to a sector, camera, and chip combination is good enough. We are not currently accounting for small movements of the spacecraft to form a composite footprint. Observation IDs for this mission are constructed based on sector, camera, and chip combination, and we can use this to launch our footprint search:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sector</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
<span class="n">camera</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
<span class="n">chip</span> <span class="o">=</span> <span class="s1">&#39;2&#39;</span>
<span class="n">observationIDwildcard</span> <span class="o">=</span> <span class="s1">&#39;tess</span><span class="si">%-s</span><span class="s1">000</span><span class="si">{}</span><span class="s1">-</span><span class="si">{}</span><span class="s1">-</span><span class="si">{}</span><span class="s1">-</span><span class="si">%-s</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sector</span><span class="p">,</span> <span class="n">camera</span><span class="p">,</span> <span class="n">chip</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here we query for a single ID and footprint to start with. For filters, we use the TESS mission, target types associated with light curves instead of full frame images, and the sector number. Note that the sector ID (sequence number) is in a different table in the CAOM database than most of the metadata we want, so we have to join these tables based on the shared observation ID.</p>
<p>This query uses an asynchronous job with longer timeouts in case of connection issues.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job</span> <span class="o">=</span> <span class="n">TAP_service</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            SELECT top 1 obs_id, s_region  </span>
<span class="s2">            FROM dbo.caomobservation JOIN ivoa.obscore on dbo.caomobservation.observationID = ivoa.obscore.obs_id </span>
<span class="s2">            WHERE collection = &#39;TESS&#39; and trgType = &#39;FIELD&#39; and </span>
<span class="s2">            sequenceNumber = </span><span class="si">{</span><span class="n">sector</span><span class="si">}</span><span class="s2"> and</span>
<span class="s2">            observationID like &#39;</span><span class="si">{</span><span class="n">observationIDwildcard</span><span class="si">}</span><span class="s2">&#39;</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">footprint_results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
<span class="n">footprint_results</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><i>Table length=1</i>
<table id="table140133816513440" class="table-striped table-bordered table-condensed">
<thead><tr><th>obs_id</th><th>s_region</th></tr></thead>
<thead><tr><th>object</th><th>object</th></tr></thead>
<tr><td>tess2018206192942-s0001-1-2-0120-s</td><td>POLYGON 330.343781 -44.336357 324.663695 -33.277694 337.720618 -28.384546 344.128672 -38.561645 330.343781 -44.336357</td></tr>
</table></div></div></div>
</div>
</section>
<section id="step-2-getting-an-inventory-of-tess-lightcurves-within-the-footprint">
<h3>Step 2: Getting an inventory of TESS lightcurves within the footprint<a class="headerlink" href="#step-2-getting-an-inventory-of-tess-lightcurves-within-the-footprint" title="Permalink to this heading">#</a></h3>
<p>Here we take the footprint from the above query and find all lightcurves intersecting with this footprint, in ALL sectors. Depending on where this is in the sky, there could be responses only in the original sector, or there could be overlaps with other sectors. There would be more sector overlap near the poles, for instance. By filtering on obs_collection = TESS, we filter based on the TESS mission and exclude High Level Science Products (including those based on TESS).</p>
<p>The format must be reformatted for our next query. We separate the shape from the list of vertices, which themselves must be comma-separated.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">footprint</span> <span class="o">=</span> <span class="n">footprint_results</span><span class="p">[</span><span class="s1">&#39;s_region&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">footprintShape</span> <span class="o">=</span> <span class="n">footprint</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">footprint</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)]</span>
<span class="n">footprintVertices</span> <span class="o">=</span> <span class="n">footprint</span><span class="p">[</span><span class="n">footprint</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">):]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">footprintShape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">footprintVertices</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>POLYGON
330.343781, -44.336357, 324.663695, -33.277694, 337.720618, -28.384546, 344.128672, -38.561645, 330.343781, -44.336357
</pre></div>
</div>
</div>
</div>
<p>Once the footprint has been isolated and reformatted, we perform another query listing all lightcurves (minus the data validation timeseries, whose files end in _dvt) by their target name, sector, RA and Dec, as well as returning the access url for each FITS file and its estimated file size. We are doing this as an asynchronous query, which handles longer response times, just in case.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job</span> <span class="o">=</span> <span class="n">TAP_service</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            SELECT target_name, sequenceNumber as sector, s_ra, s_dec, access_url, access_estsize, obs_id </span>
<span class="s2">            FROM dbo.caomobservation JOIN ivoa.obscore on dbo.caomobservation.observationID = ivoa.obscore.obs_id </span>
<span class="s2">            WHERE </span>
<span class="s2">            obs_collection = &#39;TESS&#39; and dataproduct_type = &#39;timeseries&#39; </span>
<span class="s2">            and access_url like &#39;</span><span class="si">%lc</span><span class="s2">.fits&#39; and </span>
<span class="s2">            CONTAINS(POINT(&#39;ICRS&#39;,s_ra,s_dec),</span><span class="si">{}</span><span class="s2">(&#39;ICRS&#39;, </span><span class="si">{}</span><span class="s2">))=1</span>
<span class="s2">            ORDER BY obs_id</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">footprintShape</span><span class="p">,</span> <span class="n">footprintVertices</span><span class="p">))</span>

<span class="n">TAP_results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
<span class="n">TAP_results</span>          
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">job</span> <span class="o">=</span> <span class="n">TAP_service</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span><span class="s2">             SELECT target_name, sequenceNumber as sector, s_ra, s_dec, access_url, access_estsize, obs_id </span>
<span class="g g-Whitespace">      </span><span class="mi">3</span><span class="s2">             FROM dbo.caomobservation JOIN ivoa.obscore on dbo.caomobservation.observationID = ivoa.obscore.obs_id </span>
<span class="g g-Whitespace">      </span><span class="mi">4</span><span class="s2">             WHERE </span>
<span class="g g-Whitespace">      </span><span class="mi">5</span><span class="s2">             obs_collection = &#39;TESS&#39; and dataproduct_type = &#39;timeseries&#39; </span>
<span class="g g-Whitespace">      </span><span class="mi">6</span><span class="s2">             and access_url like &#39;</span><span class="si">%lc</span><span class="s2">.fits&#39; and </span>
<span class="g g-Whitespace">      </span><span class="mi">7</span><span class="s2">             CONTAINS(POINT(&#39;ICRS&#39;,s_ra,s_dec),</span><span class="si">{}</span><span class="s2">(&#39;ICRS&#39;, </span><span class="si">{}</span><span class="s2">))=1</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span><span class="s2">             ORDER BY obs_id</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span><span class="s2">             &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">footprintShape</span><span class="p">,</span> <span class="n">footprintVertices</span><span class="p">))</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">TAP_results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="n">TAP_results</span>          

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/pyvo/dal/tap.py:301,</span> in <span class="ni">TAPService.run_async</span><span class="nt">(self, query, language, maxrec, uploads, **keywords)</span>
<span class="g g-Whitespace">    </span><span class="mi">265</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">266</span><span class="sd"> runs async query and returns its result</span>
<span class="g g-Whitespace">    </span><span class="mi">267</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">    </span><span class="mi">297</span><span class="sd"> AsyncTAPJob</span>
<span class="g g-Whitespace">    </span><span class="mi">298</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">299</span> <span class="n">job</span> <span class="o">=</span> <span class="n">AsyncTAPJob</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">300</span>     <span class="bp">self</span><span class="o">.</span><span class="n">baseurl</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">maxrec</span><span class="p">,</span> <span class="n">uploads</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">301</span> <span class="n">job</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">run</span><span class="p">()</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">302</span> <span class="n">job</span><span class="o">.</span><span class="n">raise_if_error</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">303</span> <span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">fetch_result</span><span class="p">()</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/pyvo/dal/tap.py:869,</span> in <span class="ni">AsyncTAPJob.run</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">865</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">866</span><span class="sd"> starts the job / change phase to RUN</span>
<span class="g g-Whitespace">    </span><span class="mi">867</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">868</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">869</span>     <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">870</span>         <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">/phase&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;PHASE&quot;</span><span class="p">:</span> <span class="s2">&quot;RUN&quot;</span><span class="p">})</span>
<span class="g g-Whitespace">    </span><span class="mi">871</span>     <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">872</span> <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/requests/sessions.py:635,</span> in <span class="ni">Session.post</span><span class="nt">(self, url, data, json, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">624</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">625</span><span class="w">     </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Sends a POST request. Returns :class:`Response` object.</span>
<span class="g g-Whitespace">    </span><span class="mi">626</span><span class="sd"> </span>
<span class="g g-Whitespace">    </span><span class="mi">627</span><span class="sd">     :param url: URL for the new :class:`Request` object.</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">    </span><span class="mi">632</span><span class="sd">     :rtype: requests.Response</span>
<span class="g g-Whitespace">    </span><span class="mi">633</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">635</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/requests/sessions.py:587,</span> in <span class="ni">Session.request</span><span class="nt">(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)</span>
<span class="g g-Whitespace">    </span><span class="mi">582</span> <span class="n">send_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="g g-Whitespace">    </span><span class="mi">583</span>     <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">584</span>     <span class="s2">&quot;allow_redirects&quot;</span><span class="p">:</span> <span class="n">allow_redirects</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">585</span> <span class="p">}</span>
<span class="g g-Whitespace">    </span><span class="mi">586</span> <span class="n">send_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">587</span> <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">prep</span><span class="p">,</span> <span class="o">**</span><span class="n">send_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">589</span> <span class="k">return</span> <span class="n">resp</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/requests/sessions.py:701,</span> in <span class="ni">Session.send</span><span class="nt">(self, request, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">698</span> <span class="n">start</span> <span class="o">=</span> <span class="n">preferred_clock</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span> <span class="c1"># Send the request</span>
<span class="ne">--&gt; </span><span class="mi">701</span> <span class="n">r</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span> <span class="c1"># Total elapsed time of the request (approximately)</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span> <span class="n">elapsed</span> <span class="o">=</span> <span class="n">preferred_clock</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/requests/adapters.py:489,</span> in <span class="ni">HTTPAdapter.send</span><span class="nt">(self, request, stream, timeout, verify, cert, proxies)</span>
<span class="g g-Whitespace">    </span><span class="mi">487</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">488</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">chunked</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">489</span>         <span class="n">resp</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">490</span>             <span class="n">method</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">491</span>             <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">492</span>             <span class="n">body</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">493</span>             <span class="n">headers</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">494</span>             <span class="n">redirect</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">495</span>             <span class="n">assert_same_host</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">496</span>             <span class="n">preload_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">497</span>             <span class="n">decode_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">498</span>             <span class="n">retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_retries</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">499</span>             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">500</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>     <span class="c1"># Send the request.</span>
<span class="g g-Whitespace">    </span><span class="mi">503</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">504</span>         <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">&quot;proxy_pool&quot;</span><span class="p">):</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/urllib3/connectionpool.py:703,</span> in <span class="ni">HTTPConnectionPool.urlopen</span><span class="nt">(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, **response_kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_proxy</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">702</span> <span class="c1"># Make the request on the httplib connection object.</span>
<span class="ne">--&gt; </span><span class="mi">703</span> <span class="n">httplib_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_request</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span>     <span class="n">conn</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">705</span>     <span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">706</span>     <span class="n">url</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">707</span>     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout_obj</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">708</span>     <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">709</span>     <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">710</span>     <span class="n">chunked</span><span class="o">=</span><span class="n">chunked</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">711</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">713</span> <span class="c1"># If we&#39;re going to release the connection in ``finally:``, then</span>
<span class="g g-Whitespace">    </span><span class="mi">714</span> <span class="c1"># the response doesn&#39;t need to know about the connection. Otherwise</span>
<span class="g g-Whitespace">    </span><span class="mi">715</span> <span class="c1"># it will also try to release it and we&#39;ll have a double-release</span>
<span class="g g-Whitespace">    </span><span class="mi">716</span> <span class="c1"># mess.</span>
<span class="g g-Whitespace">    </span><span class="mi">717</span> <span class="n">response_conn</span> <span class="o">=</span> <span class="n">conn</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">release_conn</span> <span class="k">else</span> <span class="kc">None</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/urllib3/connectionpool.py:449,</span> in <span class="ni">HTTPConnectionPool._make_request</span><span class="nt">(self, conn, method, url, timeout, chunked, **httplib_request_kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span>             <span class="n">httplib_response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>         <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>             <span class="c1"># Remove the TypeError from the exception chain in</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>             <span class="c1"># Python 3 (including for exceptions like SystemExit).</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span>             <span class="c1"># Otherwise it looks like a bug in the code.</span>
<span class="ne">--&gt; </span><span class="mi">449</span>             <span class="n">six</span><span class="o">.</span><span class="n">raise_from</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span> <span class="k">except</span> <span class="p">(</span><span class="n">SocketTimeout</span><span class="p">,</span> <span class="n">BaseSSLError</span><span class="p">,</span> <span class="n">SocketError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_raise_timeout</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">e</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout_value</span><span class="o">=</span><span class="n">read_timeout</span><span class="p">)</span>

<span class="nn">File &lt;string&gt;:3,</span> in <span class="ni">raise_from</span><span class="nt">(value, from_value)</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/site-packages/urllib3/connectionpool.py:444,</span> in <span class="ni">HTTPConnectionPool._make_request</span><span class="nt">(self, conn, method, url, timeout, chunked, **httplib_request_kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">441</span> <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span>     <span class="c1"># Python 3</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">444</span>         <span class="n">httplib_response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>     <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>         <span class="c1"># Remove the TypeError from the exception chain in</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>         <span class="c1"># Python 3 (including for exceptions like SystemExit).</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span>         <span class="c1"># Otherwise it looks like a bug in the code.</span>
<span class="g g-Whitespace">    </span><span class="mi">449</span>         <span class="n">six</span><span class="o">.</span><span class="n">raise_from</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/http/client.py:1374,</span> in <span class="ni">HTTPConnection.getresponse</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1372</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1373</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1374</span>         <span class="n">response</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="g g-Whitespace">   </span><span class="mi">1375</span>     <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1376</span>         <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/http/client.py:318,</span> in <span class="ni">HTTPResponse.begin</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">316</span> <span class="c1"># read until we get a non-100 response</span>
<span class="g g-Whitespace">    </span><span class="mi">317</span> <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">318</span>     <span class="n">version</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_status</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">319</span>     <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="n">CONTINUE</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">320</span>         <span class="k">break</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/http/client.py:279,</span> in <span class="ni">HTTPResponse._read_status</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">278</span> <span class="k">def</span> <span class="nf">_read_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">279</span>     <span class="n">line</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="n">_MAXLINE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;iso-8859-1&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">280</span>     <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">_MAXLINE</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">281</span>         <span class="k">raise</span> <span class="n">LineTooLong</span><span class="p">(</span><span class="s2">&quot;status line&quot;</span><span class="p">)</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/socket.py:705,</span> in <span class="ni">SocketIO.readinto</span><span class="nt">(self, b)</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span> <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">705</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sock</span><span class="o">.</span><span class="n">recv_into</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">706</span>     <span class="k">except</span> <span class="n">timeout</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">707</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_occurred</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/ssl.py:1274,</span> in <span class="ni">SSLSocket.recv_into</span><span class="nt">(self, buffer, nbytes, flags)</span>
<span class="g g-Whitespace">   </span><span class="mi">1270</span>     <span class="k">if</span> <span class="n">flags</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1271</span>         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1272</span>           <span class="s2">&quot;non-zero flags not allowed in calls to recv_into() on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
<span class="g g-Whitespace">   </span><span class="mi">1273</span>           <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1274</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1275</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1276</span>     <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">recv_into</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">nbytes</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>

<span class="nn">File /usr/share/miniconda/lib/python3.10/ssl.py:1130,</span> in <span class="ni">SSLSocket.read</span><span class="nt">(self, len, buffer)</span>
<span class="g g-Whitespace">   </span><span class="mi">1128</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1129</span>     <span class="k">if</span> <span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1130</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sslobj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1131</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1132</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sslobj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
<p>The returned data is in an astropy table; you can manipulate it to do more ordering or filtering. To download individual files or the whole set, you can use the <i>access_url</i> column, as below.</p>
<p>Python’s requests library lets you download files from a URL. The downloads will appear in the directory where your notebook is running.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example: first result row:</span>
<span class="n">single_url</span> <span class="o">=</span> <span class="n">TAP_results</span><span class="p">[</span><span class="s1">&#39;access_url&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">TAP_results</span><span class="p">[</span><span class="s1">&#39;obs_id&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;_lc.fits&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">single_url</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File downloaded: </span><span class="si">{}</span><span class="s1"> bytes&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-length&#39;</span><span class="p">]))</span>


<span class="c1"># Uncomment the code below to download every file in a loop. </span>
<span class="c1"># Warning: this can take some time as there are ~900 2megabyte files listed from the notebook&#39;s original sample query </span>
<span class="c1"># (see &quot;True length&quot; of masked table above).</span>

<span class="c1">#for rows in TAP_results:</span>
<span class="c1">#    single_url = rows[&#39;access_url&#39;]</span>
<span class="c1">#    filename = rows[&#39;obs_id&#39;] + &quot;_lc.fits&quot;</span>
<span class="c1">#    r = requests.get(single_url, allow_redirects=True)</span>
<span class="c1">#    open(filename, &#39;wb&#39;).write(r.content)</span>
<span class="c1">#print(&#39;All files downloaded.&#39;)</span>
</pre></div>
</div>
</div>
</div>
<p>If you have problems running requests or would rather save individual files through your browser, you can simply print clickable links, instead, or wrap them in curl or wget calls, which may be different based on your operating system.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example: first result row:</span>
<span class="n">single_url</span> <span class="o">=</span> <span class="n">TAP_results</span><span class="p">[</span><span class="s1">&#39;access_url&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">single_url</span><span class="p">)</span>

<span class="c1"># Uncomment the code below to display clickable links for every file in a loop.</span>
<span class="c1">#for rows in TAP_results:</span>
<span class="c1">#    single_url = rows[&#39;access_url&#39;].decode(&#39;UTF-8&#39;)</span>
<span class="c1">#    print(single_url)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="additional-resources">
<h1>Additional Resources<a class="headerlink" href="#additional-resources" title="Permalink to this heading">#</a></h1>
<section id="table-access-protocol">
<h2>Table Access Protocol<a class="headerlink" href="#table-access-protocol" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>IVOA standard for RESTful web service access to tabular data</p></li>
<li><p>http://www.ivoa.net/documents/TAP/</p></li>
</ul>
</section>
<section id="astronomical-query-data-language-2-0">
<h2>Astronomical Query Data Language (2.0)<a class="headerlink" href="#astronomical-query-data-language-2-0" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>IVOA standard for querying astronomical data in tabular format, with geometric search support</p></li>
<li><p>http://www.ivoa.net/documents/latest/ADQL.html</p></li>
</ul>
</section>
<section id="common-archive-observation-model-2">
<h2>Common Archive Observation Model (2)<a class="headerlink" href="#common-archive-observation-model-2" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>IVOA standard data model whose relational representation this catalog follows</p></li>
<li><p>http://www.opencadc.org/caom2/</p></li>
</ul>
</section>
<section id="pyvo">
<h2>PyVO<a class="headerlink" href="#pyvo" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>an affiliated package for astropy</p></li>
<li><p>find and retrieve astronomical data available from archives that support standard IVOA virtual observatory service protocols.</p></li>
<li><p>https://pyvo.readthedocs.io/en/latest/index.html</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="about-this-notebook">
<h2>About this Notebook<a class="headerlink" href="#about-this-notebook" title="Permalink to this heading">#</a></h2>
<p><strong>Authors:</strong> Scott Fleming &amp; Theresa Dower, STScI Archive Scientists &amp; Software Engineer</p>
<p><strong>Last Updated</strong>: Dec 2022</p>
<hr class="docutils" />
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png"><img alt="STScI logo" src="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png" style="width: 200px;" /></a>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/TESS/beginner_tess_tap_search"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../beginner_tess_exomast/beginner_tess_exomast.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Exoplanet Data and TESS Light Curves Using Python Requests</p>
      </div>
    </a>
    <a class="right-next"
       href="../beginner_tic_search_hd209458/beginner_tic_search_hd209458.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Search The TESS Input Catalog Centered On HD 209458.</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Download MAST TESS Light Curves Within an FFI Footprint Using TAP</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents">Table of Contents</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tap-service-introduction">TAP Service Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports">Imports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#service-specific-configuration">Service Specific Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-to-the-tap-service">Connecting to the TAP Service</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#list-available-tables">List available tables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-case-getting-images-from-a-sector-camera-and-chip">Use Case: Getting images from a sector, camera, and chip</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-getting-the-footprint">Step 1: Getting the footprint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-getting-an-inventory-of-tess-lightcurves-within-the-footprint">Step 2: Getting an inventory of TESS lightcurves within the footprint</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-resources">Additional Resources</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-access-protocol">Table Access Protocol</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#astronomical-query-data-language-2-0">Astronomical Query Data Language (2.0)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-archive-observation-model-2">Common Archive Observation Model (2)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pyvo">PyVO</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about-this-notebook">About this Notebook</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By STScI
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>